# 탑다운 치수 보기 모드 구현

## 개요
이 기능은 사용자가 3D 인테리어 시뮬레이터에서 벽과 가구의 치수를 편리하게 확인할 수 있도록 하는 탑다운 뷰 모드를 제공합니다.

## 구현된 기능

### 1. 탑다운 치수 모드 토글
- **위치**: 카메라 컨트롤 패널 최상단
- **기능**: 3D 자유 뷰와 탑다운 치수 뷰 간 전환
- **UI**: 슬라이드 토글 스위치

### 2. 카메라 제어
- **탑다운 모드**: 위에서 내려다보는 고정 시점
- **회전 제한**: 카메라 회전 비활성화
- **거리 제한**: 20-100 단위 범위로 줌 제한
- **부드러운 전환**: 모드 전환 시 자연스러운 카메라 이동

### 3. 치수 표시
- **벽 치수**: 모든 벽의 길이를 오렌지 테두리로 표시
- **가구 치수**: 선택된 가구의 크기(가로×세로×높이)를 파란 테두리로 표시
- **단위 자동 변환**: 1000mm 이상은 미터(m) 단위로 표시

### 4. 편집 기능 유지
- 탑다운 모드에서도 가구 이동, 배치 등 편집 기능 완전 지원

## 파일 구조

### 핵심 컴포넌트
```
components/sim/
├── slices/
│   └── environmentSlice.js        # 탑다운 모드 상태 관리
├── mainsim/
│   ├── CameraControlPanel.jsx     # 토글 UI
│   ├── DimensionOverlay.jsx       # 치수 표시 오버레이
│   └── TopDownCameraController.jsx # 카메라 제어
└── SimulatorCore.tsx              # 메인 통합
```

### 상태 관리
```javascript
// environmentSlice.js에 추가된 상태
{
  topDownDimensionMode: false,        // 탑다운 모드 활성화 여부
  showWallDimensions: false,          // 벽 치수 표시 여부
  showSelectedObjectDimensions: false, // 가구 치수 표시 여부
  cameraMode: 'perspective',          // 카메라 모드
  cameraZoom: 50                      // 직교 카메라 줌
}
```

## 사용법

1. **모드 활성화**: 카메라 컨트롤 패널에서 "탑다운 치수" 토글 클릭
2. **카메라 전환**: 자동으로 위에서 내려다보는 뷰로 전환
3. **치수 확인**: 
   - 벽 길이가 오렌지 라벨로 표시
   - 가구 선택 시 파란 라벨로 크기 표시
4. **편집**: 일반 모드와 동일하게 가구 이동, 회전 가능
5. **모드 해제**: 토글 재클릭으로 일반 3D 뷰로 복귀

## 기술적 세부사항

### 카메라 제어
- OrbitControls의 각도 및 거리 제한 활용
- useFrame을 통한 실시간 위치 제약
- Three.js Vector3.lerp를 사용한 부드러운 전환

### 치수 표시
- @react-three/drei의 Html 컴포넌트 활용
- 3D 월드 좌표를 HTML 오버레이로 변환
- 자동 단위 변환 (mm ↔ m)

### 성능 최적화
- 탑다운 모드에서만 치수 라벨 렌더링
- 선택된 가구에만 치수 표시하여 화면 복잡도 최소화

## 향후 개선 사항

1. **추가 치수 정보**: 각도, 면적 표시
2. **사용자 정의**: 치수 라벨 스타일 커스터마이징
3. **키보드 단축키**: 빠른 모드 전환
4. **치수 편집**: 직접 수치 입력을 통한 크기 조정